<!DOCTYPE html>
<html lang="en" >
<head>
    <meta charset="UTF-8">
    <title>Fetch Ticket</title>
</head>
<body>
    <div id="ticket"></div>
    <div id="assets"></div>
    <script>
        fetch('http://localhost:8080/api/v1/tickets/DEP-3105?from_file=yes')
            .then(response => response.json())
            .then(data => {
                const ticketElement = document.getElementById('ticket');
                let withNewLines = data.ticket.description.replaceAll("\n", "<br/>");

                ticketElement.innerHTML = `
                    <h2>Ticket ${data.ticket.id}</h2>
                    <p>Title: ${data.ticket.title}</p>
                    <p>Description: ${withNewLines}</p>
                    <p>Priority: ${data.ticket.priority}</p>
                `;

                const container = document.getElementById('assets');

                if (container) {
                    data.ticket.assets.forEach(asset => {
                        const div = document.createElement('div');
                        div.innerHTML = `<strong>${asset.step}</strong><br>${asset.content}`;
                        container.appendChild(div);
                    });
                }
            })
            .catch(error => console.error('Error:', error));
    </script>
    <div id="userList"></div>
    <script>
        const as = [
            { step: "step 1", content: "keep calm" },
            { step: "step 6", content: "carry on" }
        ];

        const container = document.getElementById('userList');

        if (container) {
            as.forEach(user => {
                const div = document.createElement('div');
                
                let withNewLines = user.content.replaceAll("\n", "<br/>");

                let unescaped = unescape(withNewLines);

                div.innerHTML = `<strong>${user.step}</strong> - ${unescaped}`;
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>



